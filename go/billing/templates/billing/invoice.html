{% load compressed %}

<!DOCTYPE html>
<html>
    <head>
        <title>Vumi Billing Statement</title>
        <meta charset="utf-8">
        {% compressed_css 'invoice' %}
    </head>

    <body>
        <div class="inv-container">
            <header class="inv-header">
                <div class="inv-pull-left">
                    <img class="inv-logo" alt="Praekelt Logo" src="{{ STATIC_URL }}img/praekelt-logo.svg">

                    <address class="inv-address">
                        <table class="inv-details-tel">
                            <tr>
                                <th>tel</th>
                                <td>27.11.482.8684</td>
                            </tr>
                            <tr>
                                <th>fax</th>
                                <td>27.11.482.9042</td>
                            </tr>
                        </table>

                        <a href="http://accounts@praekelt.com">accounts@praekelt.com</a><br>
                        <a href="http://www.praekeltfoundation.org">www.praekeltfoundation.org</a>
                    </address>
                </div>

                <div class="inv-pull-right">
                    <h1>Vumi Billing Statement</h1>

                    <table class="inv-details-context">
                        <tr>
                            <th>Account</th>
                            <td>{{ statement.account.user.email }}</td>
                        </tr>
                        <tr>
                            <th>Date</th>
                            <td>{{ statement.from_date }} to {{ statement.to_date }}</td>
                        </tr>
                    </table>
                </div>
            </header>

            {% for biller in billers %}
            <div class="inv-section">
                <h2>{{ biller.name }} ({{ biller.channel_type }})</h2>

                {% for channel in biller.channels %}
                <h3>{{ channel.name }}</h3>

                <table class="inv-items inv-items-channel">
                    <thead>
                        <tr>
                            <th>Description</th>
                            <th>Units</th>
                            <th>Credits</th>
                            <th>Unit Cost ($)</th>
                            <th>Cost ($)</th>
                        </tr>
                    </thead>

                    <tbody>
                    {% for item in channel.items %}
                        <tr>
                            <td>{{ item.description }}</th>
                            <td>{{ item.units }}</th>
                            <td>{{ item.credits }}</th>
                            <td>{{ item.unit_cost|floatformat:2 }}</th>
                            <td>{{ item.cost|floatformat:2 }}
                        </tr>
                    {% endfor %}
                    </tbody>
                    <tfoot>
                        <tr>
                            <td>Total</td>
                            <td></td>
                            <td>{{ channel.totals.credits }}</td>
                            <td></td>
                            <td>{{ channel.totals.cost|floatformat:2 }}</td>
                        </tr>
                    </tfoot>
                </table>
                {% endfor %}
            </div>
            {% endfor %}

            <div class="inv-section">
                <table class="inv-items inv-items-totals">
                    <thead>
                        <th></th>
                        <th></td>
                        <th>Credits</td>
                        <th></td>
                        <th>Cost ($)</td>
                    </thead>
                    <tfoot>
                        <td>Grand Total</td>
                        <td></td>
                        <td>{{ totals.credits }}</td>
                        <td></td>
                        <td>{{ totals.cost|floatformat:2 }}</td>
                    </tfoot>
                </table>
            </div>
        </div>
    </body>
</html>
